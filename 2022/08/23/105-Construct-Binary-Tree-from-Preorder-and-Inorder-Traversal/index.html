<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Insist on doing small things."><title>105. Construct Binary Tree from Preorder and Inorder Traversal | Pinkman Tech Space</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><div class="darkmode-toggle">ğŸŒ“</div><script>var prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)');
var toggle = document.querySelector('.darkmode-toggle');
var html = document.querySelector('html');

html.dataset.dark = localStorage.dark || prefersDarkMode.matches;

toggle.addEventListener('click', () => {
localStorage.dark = !(html.dataset.dark == 'true');
html.dataset.dark = localStorage.dark;
});</script><meta name="generator" content="Hexo 6.2.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">105. Construct Binary Tree from Preorder and Inorder Traversal</h1><a id="logo" href="/.">Pinkman Tech Space</a><p class="description">Insist on doing small things, then witness the magic</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">105. Construct Binary Tree from Preorder and Inorder Traversal</h1><div class="post-meta">2022-08-23<span> | </span><span class="category"><a href="/categories/LeetCode-Notes/">LeetCode Notes</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 4.9k</span><span class="post-meta-item-text"> Words</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i><span class="post-count"> 18</span><span class="post-meta-item-text"> Minutes</span></span></span></div><div class="post-content"><p>è¿™é¢˜æ˜¯çœŸçš„ç»å…¸. ç²¾é«“åœ¨äºå¦‚ä½•çŸ¥é“æŸä¸ªnodeæœ‰æ²¡æœ‰å·¦æ ‘? çœ‹å®ƒçš„åœ¨inorderçš„ä½ç½®å·¦è¾¹æœ‰æ²¡æœ‰node, å½“ç„¶æ˜¯è¿˜æœ‰æ²¡è¢«ç”Ÿæˆçš„node. å¦‚ä½•çŸ¥é“æŸä¸ªnodeæœ‰æ²¡æœ‰å³æ ‘? çœ‹å®ƒåœ¨inorderä¸­å®ƒå’Œå®ƒçš„parentä¹‹é—´æœ‰æ²¡æœ‰node. è¿™ä¸¤å¥è¯æ˜¯ç²¾é«“. å’Œserial binary treeé‚£é“é¢˜æ”¾åœ¨ä¸€èµ·çœ‹.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">buildTree</span><span class="params">(<span class="type">int</span>[] preorder, <span class="type">int</span>[] inorder)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] index = <span class="keyword">new</span> <span class="title class_">int</span>[] &#123; <span class="number">0</span>, <span class="number">0</span> &#125;;</span><br><span class="line">        <span class="keyword">return</span> helper(preorder, inorder, index, <span class="number">3001</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TreeNode <span class="title function_">helper</span><span class="params">(<span class="type">int</span>[] preorder, <span class="type">int</span>[] inorder, <span class="type">int</span>[] index, <span class="type">int</span> stop)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (index[<span class="number">0</span>] == preorder.length)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (inorder[index[<span class="number">1</span>]] == stop) &#123;</span><br><span class="line">            index[<span class="number">1</span>] += <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">newNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(preorder[index[<span class="number">0</span>]++]);</span><br><span class="line">        newNode.left = helper(preorder, inorder, index, newNode.val);</span><br><span class="line">        newNode.right = helper(preorder, inorder, index, stop);</span><br><span class="line">        <span class="keyword">return</span> newNode;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é“é¢˜å¾ˆéš¾æ, æˆ‘ä¹Ÿåªèƒ½å°½é‡è®©æˆ‘çš„æ–‡å­—è®°å½•ä¸‹æ¥æˆ‘ç°åœ¨çš„æƒ³æ³•. å¾ˆå¯èƒ½ä¹‹åå†å›çœ‹è¿™æ®µæ–‡å­—ä¹Ÿå¾ˆéš¾å¤åŸæ­¤æ—¶çš„æƒ³æ³•. æœ€ç›´è§‚çš„å°±æ˜¯åœ¨ç»™æˆ‘ä»¬çš„preorderè¿™ä¸ªarrayä¸­. ç¬¬0ä¸ªå…ƒç´ ä¸€å®šå°±æ˜¯æˆ‘ä»¬æƒ³è¦æ„å»ºçš„treeçš„root. è¿™ä¸ªpreorder[0]è‚¯å®šä¹Ÿåœ¨inorderä¸­çš„æŸä¸ªä½ç½®. è¿™ä¸ªä½ç½®çš„å·¦ä¾§å°±æ˜¯æ„æˆrootå·¦subtreeçš„æ‰€æœ‰nodes, å³ä¾§å°±æ˜¯æ„æˆå³subtreeçš„æ‰€æœ‰nodes. é‚£ä¹ˆinorderä¸­[0, preorder[0]åœ¨inorderä¸­çš„ä½ç½®)è¿™ä¸ªåŒºé—´å†…å°±æ˜¯rootçš„å·¦subtreeå«æœ‰çš„nodes, å‡è®¾æœ‰xä¸ª. inorderä¸­(preorder[0]åœ¨inorderä¸­çš„ä½ç½®, inorder.length - 1]å°±æ˜¯rootå³subtreeå«æœ‰çš„nodes, å‡è®¾æœ‰yä¸ª. åœ¨preorderä¸­, é™¤äº†ç¬¬0ä¸ªå…ƒç´ , å‰©ä¸‹çš„éƒ¨åˆ†ä¹Ÿè¢«åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†. å‰é¢xä¸ªå°±æ˜¯rootå·¦subtree preorderåçš„ç»“æœ. åyä¸ªå°±æ˜¯rootå³subtree preorderçš„ç»“æœ.</p>
<p>å¦‚æœä½¿ç”¨é€’å½’å‡½æ•°, æŠŠpreorderä¸­é™¤äº†ç¬¬0ä¸ªå…ƒç´ çš„å‰xä¸ªä½œä¸ºæ–°çš„preorderæ•°ç»„, inorderä¸­preorder[0]æ‰€åœ¨ä½ç½®çš„å·¦ä¾§ä½œä¸ºæ–°çš„inorderæ•°ç»„, å®ƒä»¬å°±å¯ä»¥ä½œä¸ºæ–°ä¸€è½®é€’å½’çš„è¾“å…¥äº†. æ ¼å¼å’Œå¼€å§‹æä¾›ç»™æˆ‘ä»¬çš„è¾“å…¥ä¸€æ¨¡ä¸€æ ·, è¦æ±‚ä¹Ÿæ˜¯è¦æ„å»ºä¸€ä¸ªtree. inorderå’Œpreorderé•¿åº¦ç›¸åŒ, åŒ…å«ç€åŒæ ·çš„æ•°å€¼åªæ˜¯é¡ºåºä¸ä¸€æ ·.</p>
<p>é‚£base caseæ˜¯ä»€ä¹ˆå‘¢? å¦‚æœinorderæˆ–preorderé•¿åº¦ä¸º0, é‚£ä¹ˆè¿”å›null. è¿™å°±æ˜¯base case.</p>
<p>æŒ‰ç…§è¿™ä¸ªæ€è·¯, æˆ‘ä»¬å…¶å®å¯ä»¥ä¸ç”¨åˆ›å»ºinorderå’Œpreorderçš„subarray, åªéœ€è¦ç»™4ä¸ªåˆ†ç•Œç‚¹: 2ä¸ªåœ¨inorder, 2ä¸ªåœ¨preorder. è¡¨ç¤ºæ­¤æ—¶å“ªäº›å…ƒç´ åœ¨æ–°çš„inorderå’Œpæ–°çš„reorderä¸­è¦è¢«æ„å»ºæˆä¸€ä¸ªtree. ç”±äºæˆ‘ä»¬éœ€è¦çŸ¥é“ç»™å®šçš„preorderèŒƒå›´å†…ç¬¬0ä¸ªå…ƒç´ çš„åœ¨inorderçš„ä½ç½®, å› ä¸ºè¿™ä¸ªå…ƒç´ æ˜¯æˆ‘ä»¬è¦æ„å»ºçš„treeçš„root, æˆ‘ä»¬å¼€å¤´å…ˆéå†ä¸€éinorder, ä½¿ç”¨ä¸€ä¸ªmapæ¥å­˜å‚¨inorderä¸­æ¯ä¸ªå…ƒç´ çš„ä½ç½®. äºæ˜¯æœ‰äº†ä¸‹é¢çš„è§£æ³•:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">buildTree</span><span class="params">(<span class="type">int</span>[] preorder, <span class="type">int</span>[] inorder)</span> &#123;</span><br><span class="line">        Map&lt;Integer, Integer&gt; nodeIdx = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; inorder.length; i++) &#123;</span><br><span class="line">            nodeIdx.put(inorder[i], i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> helper(<span class="number">0</span>, <span class="number">0</span>, inorder.length - <span class="number">1</span>, preorder, inorder, nodeIdx);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TreeNode <span class="title function_">helper</span><span class="params">(<span class="type">int</span> pStart, <span class="type">int</span> iStart, <span class="type">int</span> iEnd, <span class="type">int</span>[] preorder, <span class="type">int</span>[] inorder,</span></span><br><span class="line"><span class="params">            Map&lt;Integer, Integer&gt; map)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (pStart == preorder.length)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (iStart &gt; iEnd)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">newNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(preorder[pStart]);</span><br><span class="line">        <span class="type">int</span> <span class="variable">rootIdx</span> <span class="operator">=</span> map.get(preorder[pStart]);</span><br><span class="line"></span><br><span class="line">        newNode.left = helper(pStart + <span class="number">1</span>, iStart, rootIdx - <span class="number">1</span>, preorder, inorder, map);</span><br><span class="line">        <span class="type">int</span> <span class="variable">leftSubTreeNodesNum</span> <span class="operator">=</span> rootIdx - iStart;</span><br><span class="line">        newNode.right = helper(pStart + leftSubTreeNodesNum + <span class="number">1</span>, rootIdx + <span class="number">1</span>, iEnd, preorder, inorder, map);</span><br><span class="line">        <span class="keyword">return</span> newNode;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™æ ·çš„æ€è·¯æ˜¯å¯ä»¥å†™å‡ºæ¥é€’å½’å‡½æ•°çš„. æ³¨æ„æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨æ ‡è®°preorder end(pEnd)çš„è¿™ä¸ªåˆ†ç•Œç‚¹. å› ä¸ºæˆ‘ä»¬å…¨ç¨‹éƒ½æ²¡ç”¨åˆ°å®ƒ, å¹¶ä¸”å®ƒæ ¹æ®iStartå’ŒiEndæ˜¯å¯ä»¥æ±‚å‡ºæ¥çš„. base caseä¸å¥½ä¸€å¼€å§‹å°±æƒ³å‡ºæ¥, æˆ‘ä»¬æ˜¯è¾¹èµ°è¾¹è¯•æƒ³åˆ°çš„.é¦–å…ˆç»™äº†æˆ‘ä»¬ä¸€ä¸ªpreorderå’Œinorder(å°½ç®¡æ˜¯ç”¨åœ¨ä¸€ä¸ªå¤§çš„preorderå’Œinorderä»¥åŠåˆ†ç•Œç‚¹æ¥è¡¨ç¤ºçš„), æˆ‘ä»¬è®©preorderç¬¬ä¸€ä¸ªnodeä½œä¸ºæ­¤æ—¶è¦æ„å»ºçš„treeçš„root. ç„¶åæˆ‘ä»¬æ‰¾è¿™ä¸ªrootåœ¨inorderä¸­çš„ä½ç½®. é‚£ä¹ˆiStartåˆ°rootIdx - 1å°±æ˜¯æ„æˆæ­¤æ—¶å·¦subtreeçš„èŒƒå›´. rootIdx + 1åˆ°iEndå°±æ˜¯æ„æˆæ­¤æ—¶å³subtreeçš„èŒƒå›´. æˆ‘ä»¬å…ˆæ„å»ºå·¦subtree, æˆ‘ä»¬æ¥ä¸‹æ¥ä¼ å…¥æ–°çš„åˆ†ç•Œç‚¹.<br>æ­¤æ—¶pStartå˜ä¸º pStart + 1å› ä¸ºpStartå·²ç»è¢«ä½¿ç”¨. æ­¤æ—¶æˆ‘ä»¬ä¼šæƒ³å¦‚æœrootIdxå·¦è¾¹æ²¡æœ‰nodeså‘¢? æ­¤æ—¶å°±æ˜¯å‡ºç°rootIdxç­‰äºiStart, é‚£ä¹ˆrootIdx - 1 &lt; iStart. å› æ­¤è¿™å°±æ˜¯ä¸ªbase case, å¦‚æœrootIdxå·¦è¾¹æ²¡ä¸œè¥¿(iStart &lt; iEnd), è¿”å›null. æ­¤æ—¶left subtreeæ„å»ºå®Œ, æˆ‘ä»¬å¼€å§‹æ„å»ºright. æ­¤æ—¶æˆ‘ä»¬åˆ<br>å‘ç°, æ–°çš„pStartåº”è¯¥æ˜¯å¤šå°‘? è¿™å°±éœ€è¦çŸ¥é“æˆ‘ä»¬æ„å»ºå·¦è¾¹çš„æ ‘ç”¨äº†å¤šå°‘nodes. å› ä¸ºä¸Šé¢æˆ‘ä»¬æåˆ°, preorderä¸­é™¤äº†ç¬¬0ä¸ªå…ƒç´ , å‰xä¸ªå…ƒç´ ç”¨äº†æ„å»ºå·¦subtree, åyä¸ªå…ƒç´ ç”¨äº†æ„å»ºå³subtree, å› æ­¤æˆ‘ä»¬éœ€è¦çŸ¥é“å·¦æ ‘ç”¨äº†å¤šå°‘. äºæ˜¯æˆ‘ä»¬ä½¿ç”¨rootIdx - iStartå³å¯. å› ä¸ºåœ¨inorderä¸­, rootIdxå·¦ä¾§å…¨è¢«ç”¨æ¥æ„å»ºå·¦æ ‘. æ­¤æ—¶æˆ‘ä»¬éœ€è¦æŠŠpStartæ›´æ–°ä¸ºpStart + å·¦æ ‘nodeæ•°ç›® + 1. + 1æ˜¯å› ä¸ºæˆ‘ä»¬çš„pStartæ˜¯inclusiveçš„è¾¹ç•Œ, ä¹Ÿå°±æ˜¯pStartéœ€è¦æŒ‡å‘åyä¸ªå…ƒç´ ä¸­çš„æœ€å‰é¢å…ƒç´ çš„ä½ç½®. è¿™æ ·æˆ‘ä»¬æ„å»ºright tree. æ„å»ºå®Œå, è¿”å›newNodeå³å¯.</p>
<p>èƒ½ä¸èƒ½æ”¹è¿›ä¸€ä¸‹å‘¢? æˆ‘ä»¬å‘ç°å¯¹äºpStartçš„ç»´æŠ¤å¾ˆè´¹åŠ². å¦‚æœæœ‰ä¸ªå…¨å±€å˜é‡èƒ½å¤Ÿè®©æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªpreorderä¸­çš„å…ƒç´ å°±è®°å½•ä¸€ä¸ªå°±å¥½äº†.<br>äºæ˜¯æˆ‘ä»¬å¯ä»¥è®©pStartå˜ä¸ºå…¨å±€å˜é‡:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">pStart</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> TreeNode <span class="title function_">buildTree</span><span class="params">(<span class="type">int</span>[] preorder, <span class="type">int</span>[] inorder)</span> &#123;</span><br><span class="line">        Map&lt;Integer, Integer&gt; nodeIdx = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; inorder.length; i++) &#123;</span><br><span class="line">            nodeIdx.put(inorder[i], i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> helper(<span class="number">0</span>, inorder.length - <span class="number">1</span>, preorder, inorder, nodeIdx);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// inorderå‹æ ¹ä¹Ÿæ²¡ç”¨ä¸Š.</span></span><br><span class="line">    <span class="keyword">private</span> TreeNode <span class="title function_">helper</span><span class="params">(<span class="type">int</span> iStart, <span class="type">int</span> iEnd, <span class="type">int</span>[] preorder, <span class="type">int</span>[] inorder, Map&lt;Integer, Integer&gt; map)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (pStart == preorder.length)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (iStart &gt; iEnd)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">newNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(preorder[pStart]);</span><br><span class="line">        <span class="type">int</span> <span class="variable">rootIdx</span> <span class="operator">=</span> map.get(preorder[pStart]);</span><br><span class="line">        pStart += <span class="number">1</span>;</span><br><span class="line">        newNode.left = helper(iStart, rootIdx - <span class="number">1</span>, preorder, inorder, map);</span><br><span class="line">        newNode.right = helper(rootIdx + <span class="number">1</span>, iEnd, preorder, inorder, map);</span><br><span class="line">        <span class="keyword">return</span> newNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŠŠinorderåˆ æ‰ä¹Ÿæ²¡å…³ç³»</span></span><br><span class="line">    <span class="keyword">private</span> TreeNode <span class="title function_">helper</span><span class="params">(<span class="type">int</span> iStart, <span class="type">int</span> iEnd, <span class="type">int</span>[] preorder, Map&lt;Integer, Integer&gt; map)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (pStart == preorder.length)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (iStart &gt; iEnd)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">newNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(preorder[pStart]);</span><br><span class="line">        <span class="type">int</span> <span class="variable">rootIdx</span> <span class="operator">=</span> map.get(preorder[pStart]);</span><br><span class="line">        pStart += <span class="number">1</span>;</span><br><span class="line">        newNode.left = helper(iStart, rootIdx - <span class="number">1</span>, preorder, map);</span><br><span class="line">        newNode.right = helper(rootIdx + <span class="number">1</span>, iEnd, preorder, map);</span><br><span class="line">        <span class="keyword">return</span> newNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»§ç»­è§‚å¯Ÿç‰¹å¾, æˆ‘ä»¬å‘ç°æ¯æ¬¡éƒ½æ˜¯æŠŠinorderä¸€åˆ†ä¸ºäºŒ, ç„¶åå†æŠŠå·¦ä¾§ä»æŸç‚¹å†ä¸€åˆ†ä¸ºäºŒ, ç›´åˆ°inorderæœ€å·¦ä¾§å…ƒç´ è¢«newå‡ºæ¥. æ¯”å¦‚: preorder &#x3D; [3,9,20,15,7], inorder &#x3D; [9,3,15,20,7]. å¼€å§‹æˆ‘ä»¬é‡åˆ°3, é‚£ä¹ˆinorderä»3ä¸€åˆ†ä¸ºäºŒ, inorderä¸­3å·¦ä¾§æ„æˆleft subtree, å³ä¾§æ„æˆright subtree. æ­¤æ—¶æˆ‘ä»¬ä¼šèµ°å‘3çš„å·¦è¾¹(è°ƒç”¨çš„é¡ºåºå…ˆå·¦åå³). ç„¶åçœ‹åˆ°preorderä¸‹ä¸€ä¸ªå…ƒç´ æ˜¯9, æˆ‘ä»¬æ‰¾inorderä¸­çš„9. å†æ ¹æ®9æ¥å·¦å³åˆ’åˆ†. æˆ‘ä»¬å‘ç°9å·¦è¾¹æ²¡ä¸œè¥¿äº†, äºæ˜¯è¿”å›null, ç„¶åå¼€å§‹æ„å»º9çš„å³ä¾§, å‘ç°åœ¨inorderä¸­é‡åˆ°3, æ­¤æ—¶åˆ°è¾¾è¾¹ç•Œ, æˆ‘ä»¬å°±è¿”å›. è¿”å›åˆ°3å, æ­¤æ—¶3å¾€å·¦çš„å°±æ„å»ºå¥½äº†. å¼€å§‹æ„å»º3å³è¾¹çš„. ä¸‹ä¸€ä¸ªpreorderä¸­çš„å…ƒç´ æ˜¯20. æˆ‘ä»¬æ‰¾åˆ°20, åˆ’åˆ†inorderä¸€åˆ†ä¸ºäºŒ. ç„¶åå¾€å·¦èµ°. æ­¤æ—¶preorderä¸‹ä¸€ä¸ªæ˜¯15, æˆ‘ä»¬æ‰¾åˆ°inorderä¸­çš„ä½ç½®, ç„¶åå·¦å³åˆ’åˆ†. å‘ç°æ­¤æ—¶15å·¦è¾¹æ²¡ä¸œè¥¿äº†, äºæ˜¯è¿”å›null, å³è¾¹åˆæ˜¯20äºæ˜¯è¿”å›null, è‡³æ­¤, 1æ„å»ºå¥½äº†. ç„¶åè¿”å›åˆ°20, 20å¼€å§‹å¾€å³æ„å»º. æ­¤æ—¶preorderæœ€åä¸€ä¸ªå…ƒç´ æ˜¯7, æˆ‘ä»¬æ‰¾åˆ°inorderä¸­çš„ä½ç½®ä¸€åˆ†ä¸ºäºŒ. å‘ç°7å·¦è¾¹æ²¡ä¸œè¥¿äº†, è¿”å›null, 7å³è¾¹ä¹Ÿæ²¡ä¸œè¥¿äº†, è¿”å›null, æ­¤æ—¶æ‰€æœ‰çš„ä¸œè¥¿æ„å»ºå®Œæ¯•.</p>
<p>é‚£å‘ç°çš„è§„å¾‹æ˜¯ä»€ä¹ˆå‘¢? inorderä¹Ÿæ˜¯ä»å·¦å‘å³ä¸€ä¸ªä¸€ä¸ªæ„å»ºå¥½çš„, æ²¡æœ‰å…ˆæŠŠå³è¾¹çš„æŸä¸ªæ„å»ºå¥½åœ¨å›æ¥åˆ°å·¦è¾¹. è¿˜æœ‰ä¸€ä¸ªå°±æ˜¯æ„å»º15çš„æ—¶å€™, æˆ‘ä»¬å‘ç°inorderä¸­15çš„å·¦è¾¹æ²¡ä¸œè¥¿äº†? æˆ‘ä»¬æ˜¯å‡­å€Ÿä»€ä¹ˆåˆ¤æ–­æ²¡ä¸œè¥¿çš„å‘¢? å› ä¸ºå·¦è¾¹çš„9å’Œ3éƒ½è¢«ä½¿ç”¨è¿‡äº†, è¿™æ˜¯å…³é”®. è¿™è¡¨ç¤ºä¸€ä¸ªrootçš„å·¦è¾¹ç•Œ, ä¹Ÿå°±æ˜¯ç›®å‰inorderä¸­æ²¡æœ‰ç”¨åˆ°çš„æœ€å·¦ä¾§çš„node.</p>
<p>æˆ‘ä»¬å‘ç°iStartçš„ç”¨é€”æ˜¯ä¸ºäº†åˆ¤æ–­ä»€ä¹ˆæ—¶å€™å–null. é‚£ä¹ˆæˆ‘ä»¬å†™çš„iStart &gt; iEndçš„æ¡ä»¶çš„ä¸Šä¸€å±‚æ˜¯ä»€ä¹ˆæƒ…å†µå‘¢? å°±æ˜¯æ­¤æ—¶ç”Ÿæˆçš„new nodeçš„å€¼å‡ºç°åœ¨inorderæœªè¢«ç”¨åˆ°çš„nodeçš„æœ€å·¦ä¾§. å› æ­¤æˆ‘ä»¬å¯ä»¥ç»´æŠ¤ä¸€ä¸ªå…¨å±€çš„å˜é‡æ¥æŒ‡å‘ç°åœ¨çš„inorderçš„nodeæ’å…¥åˆ°äº†å“ªä¸€æ­¥. æˆ‘ä»¬ä½¿ç”¨çš„endå¯ä»¥ä¸ç”¨indexè€Œæ˜¯ä½¿ç”¨indexæ‰€å¯¹åº”å®é™…çš„å€¼, å› ä¸ºæ¯ä¸ªå€¼éƒ½æ˜¯uniqueçš„. é‚£ä¹ˆè¿™æ ·å°±æ¼”åŒ–ä¸ºäº†å¼€å§‹çš„é‚£ä¸ªè§£æ³•. stopå°±æ˜¯iEnd, int[] indexä¸­çš„index[0]ä»£è¡¨ç€pStart, index[1]ä»£è¡¨ç€å…¨å±€æŒ‡å‘inorderçš„æŒ‡é’ˆ, æŒ‡ç€ç°åœ¨æœªè¢«æ’å…¥çš„æœ€å·¦è¾¹çš„æ•°å€¼. å¦‚æœä¸€ä¸ªnodeçš„å³ä¾§è¾¹ç•Œæ˜¯å½“å‰inorder ptræ‰€æŒ‡å‘çš„ä½ç½®, é‚£ä¹ˆå°±è¯´æ˜è¿™ä¸ªnodeæ²¡æœ‰å¯ç”¨çš„nodeä½œä¸ºè‡ªå·±çš„childäº†, äºæ˜¯è¿”å›null. åŒæ ·åœ°, å½“æ‰€æœ‰çš„preorder nodeéƒ½ä½¿ç”¨å®Œå, ä¹Ÿè¿”å›null.</p>
<p>åˆšæ‰çªç„¶æƒ³åˆ°. preorderé‡Œçš„æ¯ä¸€ä¸ªnodeåœ¨inorderè¿™ä¸ªarrayä¸­éƒ½æœ‰å±äºè‡ªå·±çš„ä¸€ä¸ªèŒƒå›´, è¿™ä¸ªèŒƒå›´å†…çš„nodeså°±æ˜¯å±äºè‡ªå·±ä½œä¸ºrootçš„æ ‘ä¸­çš„. èŒƒå›´åŒ…å«è‡ªå·±æœ¬èº«, å·¦æ ‘å’Œå³æ ‘. æ¯”å¦‚å¼€å§‹æ—¶ç¬¬0ä¸ªpreorder nodeåœ¨inorderé‡Œçš„ä½ç½®, è¿™ä¸ªä½ç½®æ˜¯å®ƒè‡ªå·±, è¯¥ä½ç½®å·¦ä¾§ä»0åˆ°è¯¥ä½ç½®éƒ½æ˜¯å·¦æ ‘. è¯¥ä½ç½®åˆ°å³ä¾§éƒ½æ˜¯å³æ ‘. ä¸‹ä¸€ä¸ªpreorder nodeå°±æ˜¯å·¦æ ‘çš„root. å®ƒçš„èŒƒå›´è‡ªç„¶æ˜¯è‡ªå·±parentçš„å·¦ä¾§èŒƒå›´. é‚£è¿™ä¸ªchildåœ¨inorderä¸­çš„å·¦ä¾§èŒƒå›´æ˜¯è‡ªå·±å·¦æ ‘çš„èŒƒå›´, å®ƒçš„å³ä¾§èŒƒå›´(åˆ°è¾¾è‡ªå·±parentä¸ºæ­¢)æ˜¯è‡ªå·±å³ä¾§çš„èŒƒå›´. å› æ­¤å¯¹äºæŸä¸ªpreorderä¸­çš„node,å®ƒçš„èŒƒå›´å³ä¾§å°±æ˜¯åˆ°è‡ªå·±parentçš„ä½ç½®, å·¦ä¾§åˆ°å¤´å°±æ˜¯åˆ°inorderæœ€å·¦è¾¹è¿˜æœªè¢«ä½¿ç”¨çš„nodeå¤„. å› æ­¤æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå…¨å±€å˜é‡æ¥å»ç»´æŠ¤inorderé‡Œé¢nodeä½¿ç”¨åˆ°äº†å“ªé‡Œçš„æƒ…å†µ.</p>
<p>ç°åœ¨æƒ³ä¸€æƒ³iStartçš„ç”¨å¤„æ˜¯ä»€ä¹ˆ? å°±æ˜¯è®°å½•ä»€ä¹ˆæ—¶å€™è¦åœæ­¢, ä¹Ÿå°±æ˜¯æ¯”iEndè¦å¤§çš„æ—¶å€™.</p>
<p>å…¶å®æœ¬è´¨å°±æ˜¯ç»™ä¸€ä¸ªèŒƒå›´. æˆ‘ä»¬æ¯æ¬¡éƒ½æ˜¯å…ˆæ„é€ å·¦æ ‘, çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­:<br>preorder: [1 2 4 8 5 3 6 9 10 7] inorder: [8 4 2 5 1 10 9 6 3 7]<br>æˆ‘ä»¬å…ˆçœ‹1, çœ‹åˆ°inorderä¸­çš„1åœ¨ç¬¬4ä¸ª(0-indexed). åªè¦1å·¦è¾¹æœ‰ä¸œè¥¿, é‚£ä¸‹ä¸€ä¸ªpreorderä¸­çš„å…ƒç´ å°±æ˜¯å·¦è¾¹çš„root. é‚£ä¹ˆå†çœ‹2, åœ¨inorderç¬¬2ä¸ªä½ç½®. åŒæ ·, å†çœ‹4åœ¨ç¬¬1ä¸ªä½ç½®, ç„¶åå†çœ‹8, åŒæ ·åœ¨ç¬¬0ä¸ªä½ç½®. åˆ°ç›®å‰ä¸ºæ­¢, æˆ‘ä»¬éƒ½æ˜¯åªæ„å»ºå·¦æ ‘, å› ä¸ºpreorderçš„é¡ºåºå°±æ˜¯åªè¦æœ‰ä¸ªå€¼åœ¨inorderä¸­å·¦ä¾§æœ‰ä¸œè¥¿, é‚£ä¹ˆä¸‹ä¸€ä¸ªpreorderå…ƒç´ çš„å€¼å°±æ˜¯å·¦ä¾§çš„root. æˆ‘ä»¬å¼€å§‹æ‰¾åˆ°1, å·¦ä¾§èŒƒå›´é»˜è®¤ä¸º0åˆ°1è¿™é‡Œ; ç„¶åæ‰¾åˆ°2, é»˜è®¤èŒƒå›´æ˜¯0åˆ°2è¿™é‡Œ, ç„¶åæ‰¾åˆ°4, é»˜è®¤èŒƒå›´æ˜¯0åˆ°4è¿™é‡Œ, ç„¶åæ‰¾åˆ°8é»˜è®¤èŒƒå›´æ˜¯0åˆ°8è¿™é‡Œ. ä¸Šé¢æ˜¯å·¦é—­å³å¼€çš„åŒºé—´, å› ä¸ºæˆ‘ä»¬çŸ¥é“preorderè¿™ä¸ªå…ƒç´ æœ¬èº«æ˜¯ä¸åŒ…å«åœ¨å·¦ä¾§èŒƒå›´å†…çš„.å½“æˆ‘ä»¬æƒ³æ‰¾8çš„å·¦ä¾§èŒƒå›´çš„æ—¶å€™, æˆ‘ä»¬å‘ç°æ˜¯0åˆ°8, ä¹Ÿå°±æ˜¯å·¦ä¾§è¾¹ç•Œå’Œpreorderè¿™ä¸ªå…ƒç´ é‡åˆäº†, æ­¤æ—¶ä»£è¡¨ç€, å·¦è¾¹æ²¡ä¸œè¥¿äº†, äºæ˜¯æ­¤æ—¶æˆ‘ä»¬åº”è¯¥è¿”å›null. è¿”å›åˆ°ä¸Šä¸€å±‚, æˆ‘ä»¬è¦å¼€å§‹æ„å»º8çš„å³ä¾§, å³ä¾§åˆ™æ˜¯8åˆ°4å› ä¸º8å¯¹åº”æ ‘çš„æ•´ä½“èŒƒå›´å°±æ˜¯4å·¦ä¾§çš„èŒƒå›´, é‚£ä¹ˆ8å³ä¾§çš„æˆªæ­¢å°±æ˜¯4. æˆ‘ä»¬å‘Šè¯‰å³subtreeçš„è¾¹ç•Œæ˜¯4è¿™é‡Œ, æ­¤æ—¶æˆ‘ä»¬å‘ç°å·²ç»åˆ°4è¿™é‡Œäº†, äºæ˜¯è¿”å›null. ç„¶åå›åˆ°4è¿™é‡Œ, ç±»ä¼¼åœ°æˆ‘ä»¬æ„å»ºå³subtreeå‘Šè¯‰å®ƒæˆªæ­¢æ˜¯2, ä½†æ­¤æ—¶å·²ç»åˆ°äº†2è¿™ä¸ªä½ç½®. äºæ˜¯è¿”å›null, ç„¶åæˆ‘ä»¬ç»§ç»­å¾€ä¸Š, åˆ°2è¿™é‡Œ, 2å‘Šè¯‰å³subtreeæˆªæ­¢åœ¨1, äºæ˜¯å»æ„å»º,å‘ç°æ­¤æ—¶è¿˜æ²¡åˆ°1, é‚£ä¹ˆå°±è®©preorderçš„ä¸‹ä¸€ä¸ªå€¼æ¥æ„å»ºnode, å‘ç°æ˜¯5. æ„å»ºå¥½å, 5å‘Šè¯‰å·¦ä¾§nodeçš„èŒƒå›´çš„ä¸Šç•Œæ˜¯è¿˜æ²¡ç”¨åˆ°çš„nodes, ä¸‹ç•Œæ˜¯è‡ªå·±, å‘ç°å·²ç»åˆ°5äº†, äºæ˜¯è¿”å›null. ç„¶åå‘Šè¯‰å³subtreeä¸èƒ½åˆ°1å‘ç°å·²ç»åˆ°1äº†äºæ˜¯è¿”å›null.</p>
<p>å…¶å®æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹æˆ‘ä»¬ä¹‹å‰å†™çš„é€’å½’:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// inorderå‹æ ¹ä¹Ÿæ²¡ç”¨ä¸Š.</span></span><br><span class="line">    <span class="keyword">private</span> TreeNode <span class="title function_">helper</span><span class="params">(<span class="type">int</span> iStart, <span class="type">int</span> iEnd, <span class="type">int</span>[] preorder, <span class="type">int</span>[] inorder, Map&lt;Integer, Integer&gt; map)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (pStart == preorder.length)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (iStart &gt; iEnd)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">newNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(preorder[pStart]);</span><br><span class="line">        <span class="type">int</span> <span class="variable">rootIdx</span> <span class="operator">=</span> map.get(preorder[pStart]);</span><br><span class="line">        pStart += <span class="number">1</span>;</span><br><span class="line">        newNode.left = helper(iStart, rootIdx - <span class="number">1</span>, preorder, inorder, map);</span><br><span class="line">        newNode.right = helper(rootIdx + <span class="number">1</span>, iEnd, preorder, inorder, map);</span><br><span class="line">        <span class="keyword">return</span> newNode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŠŠinorderåˆ æ‰ä¹Ÿæ²¡å…³ç³»</span></span><br><span class="line">    <span class="keyword">private</span> TreeNode <span class="title function_">helper</span><span class="params">(<span class="type">int</span> iStart, <span class="type">int</span> iEnd, <span class="type">int</span>[] preorder, Map&lt;Integer, Integer&gt; map)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (pStart == preorder.length)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (iStart &gt; iEnd)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">TreeNode</span> <span class="variable">newNode</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TreeNode</span>(preorder[pStart]);</span><br><span class="line">        <span class="type">int</span> <span class="variable">rootIdx</span> <span class="operator">=</span> map.get(preorder[pStart]);</span><br><span class="line">        pStart += <span class="number">1</span>;</span><br><span class="line">        newNode.left = helper(iStart, rootIdx - <span class="number">1</span>, preorder, map);</span><br><span class="line">        newNode.right = helper(rootIdx + <span class="number">1</span>, iEnd, preorder, map);</span><br><span class="line">        <span class="keyword">return</span> newNode;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¼€å§‹æ˜¯ä¸€è·¯newNode.leftè°ƒç”¨. ç›´åˆ°iStartå’ŒrootIdxé‡åˆäº†, å¯¼è‡´rootIdx - 1å°äºiStart, æ­¤æ—¶è¿”å›null. è¿™é‡Œæš—å«çš„æ„æ€ä¹Ÿå°±æ˜¯, ä¸èƒ½æ„æˆä¸€ä¸ªvalidçš„èŒƒå›´, äºæ˜¯è¿”å›null. å½“è¿”å›å, ä¸Šå±‚é€’å½’ä¼šè¿è¡ŒnewNode.rightè¿™ä¸€è¡Œ, æ­¤æ—¶å®ƒçš„èŒƒå›´æ˜¯ä»€ä¹ˆå‘¢? å°±æ˜¯rootIdxå¾€å³å†åˆ°iEnd. rootIdxä»¥å·¦éƒ½è¢«ä½¿ç”¨è¿‡æ„å»ºå¥½äº†. äºæ˜¯æˆ‘ä»¬å¹²è„†ä½¿ç”¨ä¸€ä¸ªglobal variableæ¥ç»´æŠ¤ä¸€ä¸ªinorderä¸­çš„å·¦ç•Œ. å·¦ç•Œä¸ä¼šè¶…è¿‡è¿™é‡Œ. ä½†æ˜¯iEndè¿˜æ˜¯è¦ç»´æŠ¤. ä½†æˆ‘ä»¬ä¸ä½¿ç”¨indexè€Œæ˜¯å…·ä½“çš„å€¼, å› ä¸ºæ¯ä¸ªå€¼éƒ½æ˜¯uniqueçš„. æ­¤æ—¶çš„iEndå°±æ˜¯exclusiveçš„äº†. å¦‚æœiEndå’Œinorderä¸­çš„ptré‡åˆ, è¯´æ˜æ²¡æœ‰validçš„åŒºé—´, æ­¤æ—¶è¿”å›null.</p>
<p>æ€»è€Œè¨€ä¹‹å°±æ˜¯ç»™å®šåŒºé—´.</p>
<p>çœ‹ä¸Šé¢è¿™ä¸ªé€’å½’å‡½æ•°, æˆ‘ä»¬å‘ç°è‡ªä»ä¼ å…¥iStartä¹‹å, æˆ‘ä»¬ä¸€ç›´æ˜¯èµ°newNode.left, ç›´åˆ°ä¸€ä¸ªæ—¶åˆ», iStart &gt; iEnd, æ­¤æ—¶è¿”å›null, ä¸å†ç»§ç»­è°ƒç”¨newNode.left, è¿”å›åˆ°ä¸Šä¸€å±‚å, ç»™åˆ°newNode.rightçš„iStartå˜ä¸ºäº†rootIdx + 1. è¿™ä¸ªå€¼å°±æ˜¯ä¹‹å‰iStart + 1çš„ä½ç½®. é‚£ä¹‹å‰iStartçš„å€¼è¿˜ä¼šå†ç”¨å—? ä¸ä¼šäº†. æˆ‘ä»¬è°ƒç”¨newNode.rightæœ‰ä¸ªèŒƒå›´, ä¹Ÿæœ‰ä¸ªpointerå»æŒ‡å‘preorder, å’Œä¸€å¼€å§‹ç»™æˆ‘ä»¬çš„æ¡ä»¶ä¸€æ¨¡ä¸€æ ·åªä¸è¿‡æ•°å­—å˜äº†. ç„¶åæˆ‘ä»¬å»è°ƒç”¨newNode.rightè¿™è¾¹. è¿™é‡Œä¹Ÿå¯ç¤ºæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå…¨å±€å˜é‡æ¥å»åšiStartçš„åŠŸèƒ½. ä¸€å®šæ˜¯ç–¯ç‹‚è°ƒç”¨newNode.left, é‡åˆ°æŸä¸ªæ—¶åˆ»iStart &gt; iEndè¿”å›null. ç„¶åä¸Šä¸€å±‚ç»™åˆ°newNode.rightçš„iStartå˜ä¸ºç»™newNode.leftçš„iStart + 1. å¦‚æœæˆ‘ä»¬newNode.rightç›´æ¥è¿˜æ˜¯iStart &gt; iEnd, é‚£ä¹ˆæˆ‘ä»¬è¿”å›null, ä¹‹åè¿”å›ä¸Šé¢ä¸€å±‚, ä¸Šé¢ä¸€å±‚å†æ¬¡è°ƒç”¨newNode.rightçš„æ—¶å€™, iStartæ˜¯è¿”å›å®ƒçš„é€’å½’å‡½æ•°ä¸­è°ƒç”¨newNode.rightçš„iStart + 1. è¿™é‡Œå°±å‘ç°è§„å¾‹äº†, æ¯ä¸€æ¬¡å‡ºç°iStart &gt; iEndçš„æ—¶å€™, æˆ‘ä»¬å°±è®©æŒ‡å‘inorderçš„å…¨å±€ptrå‘å³ç§»åŠ¨ä¸€ä½, ç„¶åå½“è¿”å›å, ç»§ç»­è°ƒç”¨newNode.right, æ­¤æ—¶çš„iStartå·²ç»æ˜¯æ›´æ–°è¿‡çš„äº†. å½“å³æ ‘ä¹Ÿæ˜¯iStart &gt; iEnd, æˆ‘ä»¬è®©inorderå…¨å±€å˜é‡ + 1. ç„¶åè¿”å›, æ­¤æ—¶å·¦å³æ ‘éƒ½æ„å»ºå®Œæ¯•, å†è¿”å›ä¸Šå±‚, è¿™æ—¶å€™æ„å»ºå³æ ‘çš„èŒƒå›´, æ­¤æ—¶çš„iStartä¹Ÿå·²ç»æ˜¯æ›´æ–°åˆ°æœ€æ–°äº†.</p>
<p>ä¸‹é¢çš„æƒ³æ³•æ˜¯æ¯”è¾ƒé è°±çš„, å…³é”®åœ¨äºå»èµ°ä¸€éè¿™ä¸ªé€’å½’, çœ‹ä¸€çœ‹æ¯æ¬¡æ„å»ºä¸€ä¸ªtreeçš„æ—¶å€™, å·¦èŒƒå›´å’Œå³èŒƒå›´çš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆ. å‘ç°å·¦èŒƒå›´ä¸€ç›´ä¸ä¼šå˜, ç›´åˆ°é‡åˆ°æŸä¸ªæ—¶å€™å·¦å³èŒƒå›´é‡åˆ, æ­¤æ—¶å·¦èŒƒå›´ä¼šå¾€å³ç¼©ä¸€æ ¼. è¿™ä¸ªæ˜¯é‡å¤§å‘ç°.</p>
<p>åˆšæ‰åˆæƒ³åˆ°. æˆ‘ä»¬æ¥çœ‹è°ƒç”¨çš„è§„å¾‹. é¦–å…ˆæˆ‘ä»¬æ‰¾åˆ°preorderä¸­çš„ç¬¬0ä¸ª, ç„¶ååœ¨inorderä¸­æ‰¾åˆ°å®ƒçš„ä½ç½®, è¿™ä¸ªä½ç½®çš„å·¦ä¾§å°±æ˜¯ä¸‹ä¸€ä¸ªpreorderå…ƒç´ çš„ä½œä¸ºrootçš„èŒƒå›´. ç„¶åæˆ‘ä»¬åœ¨è¿™ä¸ªèŒƒå›´æ‰¾ç¬¬1ä¸ªpreorderå…ƒç´ çš„ä½ç½®, æ‰¾åˆ°å, è¿™ä¸ªä½ç½®çš„å·¦ä¾§å°±æ˜¯ä»¥ç¬¬äºŒä¸ªpreorderä¸­çš„å…ƒç´ ä½œä¸ºrootçš„treeçš„èŒƒå›´. ä¸€ç›´è¿™æ ·æ‰¾, æˆ‘ä»¬ä¼šåœ¨é‡åˆ°ç¬¬nä¸ªpreorderå…ƒç´ çš„æ—¶å€™, å‘ç°å®ƒåœ¨inorderä¸­çš„ç¬¬0ä¸ªä½ç½®. æˆ‘ä»¬æ­¤æ—¶ç»§ç»­æ„å»ºè¯¥å…ƒç´ ä¸ºrootçš„å·¦æ ‘, æ­¤æ—¶æˆ‘ä»¬ä¼ å…¥çš„èŒƒå›´ä¸º[inorderç¬¬0ä¸ªå…ƒç´ , ç¬¬é‚£ä¸ªpreorderå…ƒç´ ). æˆ‘ä»¬æ­¤æ—¶å‘ç°ä¸¤ä¸ªèŒƒå›´è¾¹ç•Œé‡åˆäº†, ç”±äºå³è¾¹ç•Œæ˜¯ä¸åŒ…æ‹¬çš„, å› æ­¤æ­¤æ—¶ä»£è¡¨ç€æ²¡æœ‰åˆé€‚çš„nodeå»æ„å»º. ç¬¬nä¸ªå…ƒç´ ä½œä¸ºrootçš„å·¦subtreeäº†. æ­¤æ—¶è¿”å›null. ç„¶åæˆ‘ä»¬å¼€å§‹æ„å»ºç¬¬nä¸ªå…ƒç´ çš„å³subtree. æ­¤æ—¶çš„è¾¹ç•Œå°±æ˜¯ç¬¬nä¸ªå…ƒç´ å³è¾¹ä¸€æ ¼å­ä¸ºèµ·å§‹(inclusive), è‡ªå·±çš„parent nodeä½œä¸ºç»ˆ(exclusive). ä¸€æ ·çš„é“ç†, åˆåˆ’å®šäº†ä¸€ä¸ªèŒƒå›´, æˆ‘ä»¬çœ‹è¿™ä¸ªèŒƒå›´å¦‚æœé‡åˆé‚£ä¹ˆå°±è¿”å›null. å¦‚æœæ²¡æœ‰é‚£ä¹ˆå°±æŠŠä¸‹ä¸€ä¸ªpreorderçš„nodeä½œä¸ºå³æ ‘çš„root, è¿™ä¸ªpreorderçš„å€¼åœ¨è¯¥èŒƒå›´å†…çš„æŸä¸ªåœ°æ–¹, å·¦ä¾§å°±æ˜¯è‡ªå·±çš„å·¦æ ‘, å³ä¾§å°±æ˜¯å³æ ‘, é‚£ä¹ˆå·¦æ ‘æ„å»ºä¹ŸæŒ‰ç…§è¿™ä¸ªé€»è¾‘, ä¸€å®šä¼šé‡åˆ°æŸä¸ªroot nodeå°±åœ¨inorderè¿™ä¸ªèŒƒå›´å†…çš„æœ€å·¦è¾¹, æ­¤æ—¶å¦‚æœæ„å»ºå®ƒçš„å·¦æ ‘ä¼šå‘ç°èŒƒå›´é‡åˆ, é‚£ä¹ˆå°±è¿”å›null.</p>
<p>ä»ä¸Šé¢çœ‹, ä»æˆ‘ä»¬ç¬¬ä¸€æ¬¡è°ƒç”¨é€’å½’å‡½æ•°, æ­¤æ—¶çš„èŒƒå›´æ˜¯[inorderç¬¬0ä¸ªå…ƒç´ , preorderç¬¬0ä¸ªå…ƒç´ ), ç„¶åæ˜¯[inorderç¬¬0ä¸ªå…ƒç´ , preorderç¬¬1ä¸ªå…ƒç´ ), ä¸€ç›´åˆ°æŸä¸ªç‚¹, æ­¤æ—¶preorderç¬¬nä¸ªå…ƒç´ ä½œä¸ºroot, ä½†æ˜¯æ­¤æ—¶å®ƒå°±æ˜¯inorderçš„ç¬¬0ä¸ªå…ƒç´ , å½“æˆ‘ä»¬ç»§ç»­æ„å»ºå®ƒçš„å·¦æ ‘æ—¶, ç»™å·¦æ ‘çš„èŒƒå›´å˜æˆ[inorderç¬¬0ä¸ªå…ƒç´ , preorderç¬¬0ä¸ªå…ƒç´ ). æ­¤æ—¶è¡¨ç¤ºæ²¡æœ‰nodeså¯ä»¥ç”¨æ¥æ„å»ºå·¦æ ‘äº†, é‚£ä¹ˆè¿”å›null. è¿”å›ä¹‹åå‘¢, æ„å»ºå³æ ‘, å³æ ‘çš„èŒƒå›´å˜ä¸º, [inorderç¬¬1ä¸ªå…ƒç´ , preorderç¬¬n - 1ä¸ªå…ƒç´ ). å› ä¸ºç¬¬nä¸ªå…ƒç´ ä½œä¸ºrootçš„treeæ˜¯å®ƒçš„parentçš„å·¦æ ‘, é‚£ä¹ˆç¬¬nä¸ªå…ƒç´ çš„ä½œä¸ºrootçš„èŒƒå›´è‡ªç„¶æ˜¯å®ƒparentå·¦ä¾§çš„èŒƒå›´, å› æ­¤parentå°±æ˜¯ç¬¬nä¸ªå…ƒç´ å³ä¾§èŒƒå›´çš„å³ç•Œé™. æ­¤æ—¶æˆ‘ä»¬æ„å»ºå‡ºæ¥çš„æƒ…å†µå’Œå¼€å§‹ä¸€æ ·, æœ‰ä¸ªå·¦è¾¹ç•Œæ˜¯inorderç¬¬1ä¸ªå…ƒç´ , å³è¾¹ç•Œåˆ™æ˜¯parentçš„å€¼. æˆ‘ä»¬å†ä½¿ç”¨ä¸€ä¸ªå…¨å±€ptræŒ‡å‘ç°åœ¨è¦æ„å»ºpreorderä¸­çš„å“ªä¸€ä¸ªnode. æ­¤æ—¶å°±å˜æˆäº†åŒæ ·è¾“å…¥çš„é—®é¢˜, é€’å½’çš„æ€æƒ³å°±å‡ºæ¥äº†. æ— éå°±æ˜¯æˆ‘ä»¬éœ€è¦ç»´æŠ¤ä¸€ä¸ªå…¨å±€å˜é‡æŒ‡å‘inorderçš„å¼€å¤´, å‡ºç°ä¸€ä¸ªèŒƒå›´é‡åˆçš„æƒ…å†µ, æˆ‘ä»¬å°±è®©è¯¥ptr + 1. æˆ‘ä»¬åŒæ ·ç»´æŠ¤ä¸€ä¸ªæŒ‡å‘preorderä¸­çš„ptr, æ–°å»ºä¸€ä¸ªnode, æˆ‘ä»¬å°±è®©å®ƒ + 1.</p>
<p>åœ¨æœ‰äº†æ–°çš„èŒƒå›´ä¹‹å, æˆ‘ä»¬è¿˜æ˜¯æ¯”è¾ƒä¸¤ä¸ªèŒƒå›´, å·¦èŒƒå›´å’Œå³èŒƒå›´, å¦‚æœé‡å¤å°±è¯´æ˜æ²¡æœ‰åˆé€‚çš„nodesäº†, è¿”å›null, å¦‚æœä¸é‡å¤, é‚£ä¹ˆæ„å»ºçš„é€»è¾‘å’Œä¸Šé¢ä¸€æ ·.è¿˜æ˜¯ä¸€ä¸ªç»™å®šçš„èŒƒå›´, å»æ„å»º, åªä¸è¿‡æ­¤æ—¶çš„èŒƒå›´å˜ä¸º[inorderç¬¬1ä¸ªå…ƒç´ , preorderç¬¬n - 1ä¸ªå…ƒç´ ).</p>
<p>æˆ‘ä»¬å‘ç°, æ¯æ¬¡å½“èŒƒå›´é‡å å, æˆ‘ä»¬è¿”å›null, æ­¤æ—¶å·¦è¾¹ç•Œå°±ä¼šæ›´æ–°. åˆšå¼€å§‹æˆ‘ä»¬çš„å·¦è¾¹ç•Œæ˜¯inorderç¬¬0ä¸ªå…ƒç´ , è¿”å›nullå, å·¦è¾¹ç•Œå˜ä¸ºinorderç¬¬ä¸€ä¸ªå…ƒç´ . ç„¶åæˆ‘ä»¬å»æ„å»ºå³subtree, æ­¤æ—¶ç»§ç»­æ„å»ºå³subtreeä¸‹é¢çš„tree, è¿˜æ˜¯å…ˆæ„å»ºå·¦æ ‘, åˆ°æŸä¸ªåœ°æ­¥, è¿”å›null, ç„¶åå·¦è¾¹ç•Œåˆæ”¹å˜, æ”¹ä¸ºæ„å»ºæ­¤æ—¶çš„å³subtree, æ€»æœ‰ä¸€ç§æƒ…å†µ, å³subtreeçš„èŒƒå›´é‡å , è¿”å›null, æ­¤æ—¶å·¦è¾¹ç•Œç»§ç»­æ›´æ–°+ 1. é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å…¨å±€å˜é‡ç»´æŠ¤ä¸€ä¸ªinorderä¸­çš„ptr, å½“æ¯æ¬¡å‡ºç°èŒƒå›´é‡åˆçš„æƒ…å†µçš„æ—¶å€™, æˆ‘ä»¬å°±è®©inorderä¸­çš„ptr + 1.</p>
</div><div class="tags"></div><div class="post-nav"><a class="pre" href="/2022/08/23/106-Construct-Binary-Tree-from-Inorder-and-Postorder-Traversal/">106. Construct Binary Tree from Inorder and Postorder Traversal</a><a class="next" href="/2022/08/23/101-Symmetric-Tree/">101. Symmetric Tree</a></div></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><div class="author-info"><a class="info-avatar" href="/about/" title="About"><img src="/img/dark_side_of_the_moon.jpeg"/></a><p>Calm Patient Persistent</p><a class="info-icon" href="mailto:tongxinn@andrew.cmu.edu" title="Email" target="_blank" style="margin-inline:5px"> <i class="fa fa-envelope-square" style="margin-inline:5px"></i></a><a class="info-icon" href="https://github.com/FelderMountain" title="Github" target="_blank" style="margin-inline:5px"> <i class="fa fa-github-square" style="margin-inline:5px"></i></a><a class="info-icon" href="https://www.linkedin.com/in/tongxin-niu" title="LinkedIn" target="_blank" style="margin-inline:5px"> <i class="fa fa-linkedin-square" style="margin-inline:5px"></i></a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Always-Review-Here/">Always Review Here</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/LeetCode-Notes/">LeetCode Notes</a><span class="category-list-count">254</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Templates/">Templates</a><span class="category-list-count">15</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="https://leetcode.com/Pinkman_Ox/" title="Pinkman LeetCode" target="_blank">Pinkman LeetCode</a><ul></ul><a href="https://www.youtube.com/watch?v=PLIAp5nr0q0" title="Live Aid (Queen) [1985, London, Wembly Stadium]" target="_blank">Live Aid (Queen) [1985, London, Wembly Stadium]</a><ul></ul><a href="https://www.bilibili.com/video/BV15f4y1p7Gq?spm_id_from=333.337.search-card.all.click&amp;vd_source=36313f6ca20b47d3b8d1740651933b35" title="Hotel California (Eagles) [1994, Hell Freezes Over]" target="_blank">Hotel California (Eagles) [1994, Hell Freezes Over]</a><ul></ul><a href="https://www.youtube.com/watch?v=FcoUvu0mGog" title="Fade to Black (Metallica) [2018, Lincoln, NE]" target="_blank">Fade to Black (Metallica) [2018, Lincoln, NE]</a><ul></ul><a href="https://www.youtube.com/watch?v=Ly6ZhQVnVow" title="Stairway To Heaven (Led Zeppelin) [1975, Live at Earls Court]" target="_blank">Stairway To Heaven (Led Zeppelin) [1975, Live at Earls Court]</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright Â© 2022 <a href="/." rel="nofollow">Pinkman Tech Space.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>